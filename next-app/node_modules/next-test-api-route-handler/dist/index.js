(()=>{"use strict";var e,r,t={730:e=>{e.exports=require("next/dist/server/api-utils/node.js")}},o={};function n(e){var r=o[e];if(void 0!==r)return r.exports;var s=o[e]={exports:{}};return t[e](s,s.exports,n),s.exports}n.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return n.d(r,{a:r}),r},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(t,o){if(1&o&&(t=this(t)),8&o)return t;if("object"==typeof t&&t){if(4&o&&t.__esModule)return t;if(16&o&&"function"==typeof t.then)return t}var s=Object.create(null);n.r(s);var i={};e=e||[null,r({}),r([]),r(r)];for(var a=2&o&&t;"object"==typeof a&&!~e.indexOf(a);a=r(a))Object.getOwnPropertyNames(a).forEach((e=>i[e]=()=>t[e]));return i.default=()=>t,n.d(s,i),s},n.d=(e,r)=>{for(var t in r)n.o(r,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},n.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};(()=>{n.r(s),n.d(s,{testApiHandler:()=>y});const e=require("node-fetch");var r=n.n(e);const t=require("http");var o=n.n(t);const i=require("url");var a=n.n(i);const l=require("cookie");var u=n.n(l);const{createServer:c}=o(),{parse:p}=a(),{parse:d}=u();let f=null;const v=e=>r=>{var t;return(v.importErrors=null!==(t=v.importErrors)&&void 0!==t?t:[]).push(r),{}.NODE_ESM?import(e):require(e)},h=(e,r,t)=>{if(!e.writableEnded&&e.end(),!t)throw r;t(r)};async function y({rejectOnHandlerError:t,requestPatcher:o,responsePatcher:s,paramsPatcher:i,params:a,url:l,handler:u,test:y}){let m=null,b=null;try{if(!f&&(({apiResolver:f}=await Promise.resolve().then(n.t.bind(n,730,23)).catch(v("next/dist/server/api-utils.js")).catch(v("next/dist/next-server/server/api-utils.js")).catch(v("next-server/dist/server/api-utils.js")).catch((e=>(v.importErrors.push(e),{apiResolver:null})))),!f)){const e=v.importErrors.map((e=>e.message.split(/(?<=')( imported)? from ('|\S)/)[0].split("\nRequire")[0])).join("\n    - ");throw v.importErrors=[],new Error(`next-test-api-route-handler (NTARH) failed to import api-utils.js\n\n  This is usually caused by:\n\n    1. Using npm@<7 and/or node@<15, which doesn't install peer deps automatically (review install instructions)\n    2. NTARH and the version of Next.js you installed are actually incompatible (please submit a bug report)\n\n  Failed import attempts:\n\n    - ${e}`)}m=c(((e,r)=>{try{if("function"!=typeof f)throw new Error("assertion failed unexpectedly: apiResolver was not a function");l&&(e.url=l),o&&o(e),s&&s(r);const n={...p(e.url||"",!0).query,...a};i&&i(n),f(e,r,n,u,void 0,!!t).catch((e=>h(r,e,b)))}catch(e){h(r,e,b)}}));const j=`http://localhost:${await new Promise(((e,r)=>{var t;null===(t=m)||void 0===t||t.listen((()=>{var t;const o=null===(t=m)||void 0===t?void 0:t.address();o&&"string"!=typeof o?e(o.port):r(new Error("assertion failed unexpectedly: server did not return AddressInfo instance"))}))}))}`;await new Promise(((t,o)=>{b=o,y({fetch:async t=>{const o={...t,headers:(n=new e.Headers(null==t?void 0:t.headers),n.has("x-msw-bypass")||n.set("x-msw-bypass","true"),n)};var n;return r()(j,o).then((e=>(Object.defineProperty(e,"cookies",{configurable:!0,enumerable:!0,get:()=>(delete e.cookies,e.cookies=[e.headers.raw()["set-cookie"]||[]].flat().map((e=>Object.entries(d(e)).reduce(((e,[r,t])=>Object.assign(e,{[String(r)]:t,[String(r).toLowerCase()]:t})),{}))),e.cookies)}),e)))}}).then(t,o)}))}finally{var w;null===(w=m)||void 0===w||w.close()}}})(),module.exports=s})();